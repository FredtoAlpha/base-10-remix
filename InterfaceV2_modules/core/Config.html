/**
 * CONFIG.JS - Configuration et constantes de l'application
 * 
 * Centralise toutes les configurations, constantes et param√®tres
 * utilis√©s dans l'application InterfaceV2.
 */

const AppConfig = {
  // ============================================
  // MODES DE TRAVAIL
  // ============================================
  MODES: {
    TEST: 'TEST',           // Onglets TEST pour commencer
    CACHE: 'CACHE',         // Brouillon auto-sauvegard√©
    FIN: 'FIN',             // Classes finalis√©es
    PREVIOUS: 'PREVIOUS'    // Ann√©e pr√©c√©dente
  },
  
  // ============================================
  // MODES D'AFFICHAGE
  // ============================================
  VIEW_MODES: {
    COMPLETE: 'complete',   // Vue compl√®te avec tous les d√©tails
    ESSENTIAL: 'essential', // Vue essentielle (nom + badges essentiels)
    SIMPLE: 'simple'        // Vue simplifi√©e (nom uniquement)
  },
  
  // ============================================
  // TYPES DE MOBILIT√â
  // ============================================
  MOBILITE: {
    LIBRE: 'LIBRE',         // D√©placement libre
    CONDI: 'CONDI',         // Conditionnel
    FIXE: 'FIXE',           // Fixe (ne peut pas bouger)
    PERMUT: 'PERMUT',       // Permutation uniquement
    SPEC: 'SPEC'            // Sp√©cial (option prioritaire)
  },
  
  // ============================================
  // TYPES DE SCORES
  // ============================================
  SCORES: {
    COM: { key: 'COM', label: 'Comportement', letter: 'C' },
    TRA: { key: 'TRA', label: 'Travail', letter: 'T' },
    PART: { key: 'PART', label: 'Participation', letter: 'P' },
    ABS: { key: 'ABS', label: 'Absences', letter: 'A' }
  },
  
  // ============================================
  // LANGUES (LV2)
  // ============================================
  LANGUES: {
    ESP: 'ESP',             // Espagnol (autoris√© partout)
    ITA: 'ITA',             // Italien
    ALL: 'ALL',             // Allemand
    LATIN: 'LATIN',         // Latin
    GRECO: 'GRECO'          // Grec
  },
  
  // Ordre de tri des langues
  LANGUES_ORDER: ['ESP', 'ITA', 'ALL', 'LATIN', 'GRECO'],
  
  // ============================================
  // TYPES DE NOTIFICATIONS
  // ============================================
  TOAST_TYPES: {
    INFO: 'info',
    SUCCESS: 'success',
    ERROR: 'error',
    WARNING: 'warning'
  },
  
  // ============================================
  // IC√îNES FONT AWESOME
  // ============================================
  ICONS: {
    INFO: 'fa-info-circle',
    SUCCESS: 'fa-check-circle',
    ERROR: 'fa-exclamation-circle',
    WARNING: 'fa-exclamation-triangle',
    SEARCH: 'fa-search',
    SAVE: 'fa-save',
    UNDO: 'fa-undo',
    REDO: 'fa-redo',
    SWAP: 'fa-exchange-alt',
    STATS: 'fa-chart-bar',
    SETTINGS: 'fa-cog',
    ADMIN: 'fa-unlock-alt'
  },
  
  // ============================================
  // LIMITES ET SEUILS
  // ============================================
  LIMITS: {
    MAX_NAME_LENGTH: 25,        // Longueur max du nom affich√©
    MIN_FONT_SIZE: 16,          // Taille min de police (vue simple)
    MAX_FONT_SIZE: 32,          // Taille max de police (vue simple)
    AUTO_SAVE_INTERVAL: 60000,  // Intervalle auto-save (1 minute)
    TOAST_DURATION: 3000,       // Dur√©e d'affichage des toasts (3s)
    TOAST_ERROR_DURATION: 4000, // Dur√©e pour les erreurs (4s)
    STATS_UPDATE_DELAY: 150     // D√©lai avant mise √† jour stats (150ms)
  },
  
  // ============================================
  // COULEURS
  // ============================================
  COLORS: {
    PRIMARY: '#5b21b6',
    PRIMARY_DARK: '#4c1d95',
    SECONDARY: '#06b6d4',
    SUCCESS: '#10b981',
    WARNING: '#f59e0b',
    DANGER: '#ef4444',
    DARK: '#1e293b',
    LIGHT: '#f8fafc',
    
    // Couleurs sexe
    FEMALE: '#ec4899',
    FEMALE_LIGHT: '#fbcde6',
    MALE: '#3b82f6',
    MALE_LIGHT: '#d7e8fe',
    
    // Couleurs scores
    SCORE_1: '#ef4444',  // Rouge (mauvais)
    SCORE_2: '#f59e0b',  // Orange
    SCORE_3: '#3b82f6',  // Bleu
    SCORE_4: '#10b981'   // Vert (bon)
  },
  
  // ============================================
  // MESSAGES
  // ============================================
  MESSAGES: {
    LOADING: 'Chargement en cours...',
    SAVING: 'Sauvegarde en cours...',
    SAVED: 'Sauvegarde r√©ussie',
    ERROR_SAVE: 'Erreur lors de la sauvegarde',
    ERROR_LOAD: 'Erreur lors du chargement',
    NO_DATA: 'Aucune donn√©e trouv√©e',
    SWAP_SUCCESS: 'Swap r√©ussi',
    SWAP_ERROR: 'Swap impossible',
    MOVE_SUCCESS: 'D√©placement r√©ussi',
    MOVE_ERROR: 'D√©placement impossible',
    CAPACITY_WARNING: 'Capacit√© d√©pass√©e',
    QUOTA_REACHED: 'Quota atteint',
    CONSTRAINT_VIOLATED: 'Contrainte viol√©e'
  },
  
  // ============================================
  // CLASSES CSS
  // ============================================
  CSS_CLASSES: {
    DRAGGING: 'dragging',
    DRAG_OVER: 'drag-over',
    DROP_FORBIDDEN: 'drop-forbidden',
    SWAP_MODE: 'swap-mode',
    SWAP_TARGET: 'swap-target',
    DARK_MODE: 'dark-mode',
    FULLSCREEN: 'fullscreen-mode',
    GENDER_BADGES: 'gender-badges',
    WHITE_BG: 'white-bg',
    FADE_IN: 'fade-in',
    HIDDEN: 'hidden'
  },
  
  // ============================================
  // S√âLECTEURS DOM
  // ============================================
  SELECTORS: {
    BOARD: '#board',
    LOADING_SPINNER: '#loadingSpinner',
    MODE_BADGE: '#modeBadge',
    SEARCH_INPUT: '#search',
    STATS_PANEL: '#statsPanel',
    STARTUP_MODAL: '#startupModal',
    CLASS_COLUMN: '.class-column',
    DROPPABLE_ZONE: '.droppable-zone',
    STUDENT_CARD: '.student-card',
    SORT_BTN: '.sort-btn'
  },
  
  // ============================================
  // RACCOURCIS CLAVIER
  // ============================================
  KEYBOARD_SHORTCUTS: {
    SEARCH: 'ctrl+f',
    UNDO: 'ctrl+z',
    REDO: 'ctrl+y',
    SWAP: 's',
    STATS: 't',
    DARK_MODE: 'd',
    VIEW_MODE: 'v',
    HELP: 'h',
    ESCAPE: 'escape'
  },
  
  // ============================================
  // VALIDATION
  // ============================================
  VALIDATION: {
    // Regex pour valider les IDs
    ID_PATTERN: /^[A-Z0-9_-]+$/i,
    // Regex pour d√©tecter le niveau (ex: 6¬∞1, 5¬∞2)
    NIVEAU_PATTERN: /^(\d¬∞)/,
    // Regex pour extraire niveau et num√©ro de classe
    CLASSE_PATTERN: /(\d+)¬∞(\d+)/
  },
  
  // ============================================
  // M√âTHODES UTILITAIRES
  // ============================================
  
  /**
   * Obtient la couleur d'un score
   * @param {number} score - Score de 1 √† 4
   * @returns {string} Couleur hexad√©cimale
   */
  getScoreColor(score) {
    const colors = {
      1: this.COLORS.SCORE_1,
      2: this.COLORS.SCORE_2,
      3: this.COLORS.SCORE_3,
      4: this.COLORS.SCORE_4
    };
    return colors[score] || this.COLORS.DARK;
  },
  
  /**
   * Obtient l'ic√¥ne d'un type de toast
   * @param {string} type - Type de toast
   * @returns {string} Classe d'ic√¥ne Font Awesome
   */
  getToastIcon(type) {
    const icons = {
      info: this.ICONS.INFO,
      success: this.ICONS.SUCCESS,
      error: this.ICONS.ERROR,
      warning: this.ICONS.WARNING
    };
    return icons[type] || this.ICONS.INFO;
  },
  
  /**
   * V√©rifie si un mode est valide
   * @param {string} mode - Mode √† v√©rifier
   * @returns {boolean}
   */
  isValidMode(mode) {
    return Object.values(this.MODES).includes(mode);
  },
  
  /**
   * V√©rifie si une mobilit√© est valide
   * @param {string} mobilite - Mobilit√© √† v√©rifier
   * @returns {boolean}
   */
  isValidMobilite(mobilite) {
    return Object.values(this.MOBILITE).includes(mobilite);
  },
  
  /**
   * Obtient le label d'un mode
   * @param {string} mode - Mode
   * @returns {string} Label format√©
   */
  getModeLabel(mode) {
    const labels = {
      TEST: 'üìö TEST (Classes test)',
      CACHE: 'üíæ CACHE (Brouillon)',
      FIN: '‚úÖ FIN (Classes finales)',
      PREVIOUS: 'üìã PREVIOUS (Ann√©e pass√©e)'
    };
    return labels[mode] || mode;
  }
};

// Exposer globalement
if (typeof window !== 'undefined') {
  window.AppConfig = AppConfig;
}

// Export pour modules ES6
if (typeof module !== 'undefined' && module.exports) {
  module.exports = AppConfig;
}
